# Jobbergate Agent Configuration Example
# Copy this file to .env and fill in the appropriate values for your environment

# ==============================================================================
# REQUIRED SETTINGS
# ==============================================================================

# Jobbergate API Configuration
JOBBERGATE_AGENT_BASE_API_URL="https://apis.vantagehpc.io"

# OIDC (OpenID Connect) Configuration for machine-to-machine security
JOBBERGATE_AGENT_OIDC_DOMAIN="auth.vantagehpc.io/realms/vantage"
JOBBERGATE_AGENT_OIDC_CLIENT_ID="jobbergate-agent"
JOBBERGATE_AGENT_OIDC_CLIENT_SECRET="CHANGE_ME"
JOBBERGATE_AGENT_OIDC_USE_HTTPS="true"

# Slurm User Configuration
JOBBERGATE_AGENT_X_SLURM_USER_NAME="ubuntu"

# ==============================================================================
# USER MAPPER CONFIGURATION
# ==============================================================================
# The user mapper determines how email addresses from Jobbergate are mapped to
# local Slurm usernames. Available options:
#   - single-user-mapper (default): Maps all users to a single Slurm user
#   - ldap-cached-mapper: Maps users via LDAP/Active Directory lookups
#
# If not specified, defaults to "single-user-mapper"
# JOBBERGATE_AGENT_SLURM_USER_MAPPER="single-user-mapper"

# ==============================================================================
# LDAP CONFIGURATION (Required when using ldap-cached-mapper)
# ==============================================================================
# To enable LDAP user mapping, set SLURM_USER_MAPPER to "ldap-cached-mapper"
# and configure the following LDAP settings:

# JOBBERGATE_AGENT_SLURM_USER_MAPPER="ldap-cached-mapper"
# JOBBERGATE_AGENT_LDAP_URI="ldap://ldap.example.com:389"
# JOBBERGATE_AGENT_LDAP_DOMAIN="example.com"
# JOBBERGATE_AGENT_LDAP_USERNAME="ldap-service-account"
# JOBBERGATE_AGENT_LDAP_PASSWORD="ldap-password"

# LDAP_URI: The URI of the LDAP/Active Directory server
#   - For LDAP: ldap://ldap.example.com:389
#   - For LDAPS (SSL): ldaps://ldap.example.com:636
#
# LDAP_DOMAIN: The domain name used for NTLM authentication and search base
#   - Must be a fully qualified domain name (e.g., example.com)
#   - Used to construct the search base (DC=example,DC=com)
#
# LDAP_USERNAME: Service account username for LDAP authentication
# LDAP_PASSWORD: Service account password for LDAP authentication

# ==============================================================================
# OPTIONAL SETTINGS
# ==============================================================================

# Sentry Error Tracking (Optional)
# JOBBERGATE_AGENT_SENTRY_DSN="https://your-sentry-dsn"
# JOBBERGATE_AGENT_SENTRY_ENV="production"
# JOBBERGATE_AGENT_SENTRY_TRACES_SAMPLE_RATE="0.01"

# Slurm Paths (Defaults shown)
# JOBBERGATE_AGENT_SBATCH_PATH="/usr/bin/sbatch"
# JOBBERGATE_AGENT_SCONTROL_PATH="/usr/bin/scontrol"
# JOBBERGATE_AGENT_SCANCEL_PATH="/usr/bin/scancel"
# JOBBERGATE_AGENT_DEFAULT_SLURM_WORK_DIR="/home/{username}"

# Task Scheduling
# JOBBERGATE_AGENT_TASK_JOBS_INTERVAL_SECONDS="60"
# JOBBERGATE_AGENT_TASK_SELF_UPDATE_INTERVAL_SECONDS=""

# Caching
# JOBBERGATE_AGENT_CACHE_DIR="~/.cache/jobbergate-agent"

# Job Submission
# JOBBERGATE_AGENT_WRITE_SUBMISSION_FILES="true"
# JOBBERGATE_AGENT_GET_EXTRA_GROUPS="false"

# API Pagination
# JOBBERGATE_AGENT_MAX_PAGES_PER_CYCLE="5"
# JOBBERGATE_AGENT_ITEMS_PER_PAGE="100"

# InfluxDB Metrics Collection (Optional)
# JOBBERGATE_AGENT_INFLUX_DSN="influxdb://localhost:8086/database"
# JOBBERGATE_AGENT_INFLUX_POOL_SIZE="10"
# JOBBERGATE_AGENT_INFLUX_SSL="false"
# JOBBERGATE_AGENT_INFLUX_VERIFY_SSL="false"
# JOBBERGATE_AGENT_INFLUX_TIMEOUT=""
# JOBBERGATE_AGENT_INFLUX_UDP_PORT="4444"
# JOBBERGATE_AGENT_INFLUX_CERT_PATH=""
